https        = require "https"
coffeescript = require "coffee-script"

# The callback gets on parameter, the has the compiled JS
module.exports = (url, callback)->
  req = https.get url, (res)->
    moduleSourceCode = ""
    res.on 'data', (data)->
      moduleSourceCode += data

    res.on 'end', ()->
      callback coffeescript.compile(moduleSourceCode)

    res.on 'error', (err)->
      console.log "Error getting coffeescript: ", err
